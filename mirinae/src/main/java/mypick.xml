<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mypickns">
	<!-- 공지사항 리스트 -->
	<select id="myList" parameterType="hashmap" resultType="mypick">
		select * from (select rowNum rn, e.* from 
		(select m.*, cate_code, p_name, p_content, s_date, e_date, goal_money, cur_money
		from mypick m, project p 
		where m.p_no = p.p_no and m.m_no = #{m_no} and p.p_del='n') e)
		where rn between #{startRow} and #{endRow}
	</select>
	<!-- 총 마이픽 갯수 -->
	<select id="getTotal" resultType="integer">
		select count(*) from mypick
	</select>
	<!-- m_no 조회 -->
	<select id="selectM_no" parameterType="string" resultType="integer">
		select m_no from member where m_id = #{m_id}
	</select>
	<select id="selectP" parameterType="integer" resultType="Project">
		select * from project where p_no = #{p_no}
	</select>
	
	<!-- 마이픽 저장 -->
	<insert id="myinsert" parameterType="integer">
		insert into mypick values(#{m_no}, #{p_no})
	</insert>
	<!-- 마이픽 삭제 -->
	<delete id="mydelete" parameterType="integer">
		delete from mypick where m_no = #{m_no} and p_no={p_no} 
	</delete>
</mapper>